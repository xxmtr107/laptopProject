<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Trang Ch·ªß LaptopShop</title>
    <!--
   Link nh√∫ng Bootstrap 5 v√†o giao di·ªán qua CDN:
   - S·ª≠ d·ª•ng CDN ƒë·ªÉ t·∫£i Bootstrap nhanh t·ª´ server c·ªßa Bootstrap, kh√¥ng c·∫ßn t·ª± l∆∞u file v·ªÅ d·ª± √°n.
   - ƒë·∫∑t ·ªü <head>, gi√∫p d√πng s·∫µn c√°c class (btn, row, card, col, ...).
    -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .card.laptop-featured {
            border-radius: 18px;
            border: 3px solid #fbad17;
            box-shadow: 0 8px 34px #f7be8090, 0 2px 8px #fa6c24;
            transition: box-shadow 0.16s, border 0.18s, transform 0.12s;
            position: relative;
            overflow: visible;
        }
        .card.laptop-featured:hover {
            box-shadow: 0 18px 60px #f79e1c3a, 0 5px 19px #00acee99;
            border-color: #f25510;
            transform: translateY(-4px) scale(1.045);
        }

        .badge.discount {
            left: 18px; top: 18px;
            background: linear-gradient(90deg, #fc4a1a, #f7b733 80%);
            color: #fff;
            padding: 9px 22px;
            border-radius: 16px;
            font-weight: bold;
            box-shadow: 0 1px 6px #fa7c1555;
            font-size: 1.03em;
        }
        .btn.product-detail {
            background: linear-gradient(95deg,#ffd700 15%,#f79e1f 80%);
            color: #b04400; font-weight: bold;
            border-radius: 7px; padding: 8px 22px; font-size: 1.07em;
            margin-top: 8px;
        }
        .btn.product-detail:hover {
            background: linear-gradient(95deg,#f25510,#fae124 120%);
            color: #fff200;
            box-shadow: 0 4px 16px #ffd079;
        }
        /* Th·∫ª gi·∫£m gi√° n·ªïi tr√™n ƒë·∫ßu card */
        .discount-tag {
            position: absolute;
            top: -19px; left: 16px;
            background: #ff2f0d;
            color: #fff;
            font-weight: bold;
            font-size: 1.05em;
            z-index: 5;
            padding: 5px 22px 6px 22px;
            border-radius: 13px 13px 13px 0;
            box-shadow: 0 4px 17px #fc4a1a55, 0 0 8px #fff1;
            border: 2.5px solid #fbe210;
            letter-spacing: 1.5px;
        }


    </style>
</head>
<body style="background: #f6f7fb;">

<!-- Header -->
<div th:replace="~{fragments/headerCust :: navbar}"></div>

<!-- Banner carousel -->
<div class="container-fluid px-0">
    <div id="shopBanner" class="carousel slide mb-4" data-bs-ride="carousel" data-bs-interval="3500">
        <div class="carousel-inner">
            <div class="carousel-item active" data-bs-interval="3500">
                <img src="/img/laptop.jpg" class="d-block w-100" alt="anh banner 1" style="height:650px; object-fit:cover;">
            </div>
            <div class="carousel-item" data-bs-interval="3500">
                <img src="/img/uudaiii.jpg" class="d-block w-100" alt="anh banner 2" style="height:650px; object-fit:cover;">
            </div>
            <div class="carousel-item" data-bs-interval="3500">
                <img src="/img/laptopp.jpg" class="d-block w-100" alt="anh banner 3" style="height:650px; object-fit:cover;">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#shopBanner" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#shopBanner" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</div>

<!-- Th√¥ng ƒëi·ªáp -->
<div class="container mb-3">
    <div class="bg-primary bg-gradient rounded p-3 text-center text-white shadow-sm fw-bold fs-5">
        üåü Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi LaptopShop! H√£y ƒë·ªÉ ch√∫ng t√¥i mang ƒë·∫øn cho b·∫°n nh·ªØng chi·∫øc laptop y√™u th√≠ch v√† tr·∫£i nghi·ªám mua s·∫Øm tuy·ªát v·ªùi! üíªüíñ
    </div>
</div>

<!-- Box th·ªëng k√™ nh·ªè -->
<div class="container my-4">
    <div class="row justify-content-center g-4">
        <!-- Box: T·ªïng laptop (Cam ƒë·∫≠m chuy·ªÉn ƒë·ªè) -->
        <div class="col-12 col-md-4">
            <div class="stat-card shadow-lg rounded-4 p-4 text-center h-100"
                 style="background: linear-gradient(135deg, #fd720c 0%, #fa2c2c 80%, #ffd06a 100%);
                        color: #fff;">
                <div class="mb-2">
                    <i class="bi bi-laptop fs-1" style="color:#fff; filter: drop-shadow(0 1px 5px #fa2c2c99);"></i>
                </div>
                <div class="display-5 fw-bold mb-1" style="color:#fff;" th:text="${homepageStats.totalLaptops}">0</div>
                <div class="fw-semibold" style="color:rgba(255,255,255,0.93);">Laptop ƒëang b√°n</div>
            </div>
        </div>
        <!-- Box: T·ªïng brand (Xanh l√°, v√†ng chanh t∆∞∆°i) -->
        <div class="col-12 col-md-4">
            <div class="stat-card shadow-lg rounded-4 p-4 text-center h-100"
                 style="background: linear-gradient(135deg, #4acf64 15%, #f9e506 70%, #81f194 100%);
                        color: #fff;">
                <div class="mb-2">
                    <i class="bi bi-building fs-1" style="color:#fff; filter: drop-shadow(0 1px 5px #4acf6499);"></i>
                </div>
                <div class="display-5 fw-bold mb-1" style="color:#fff;" th:text="${homepageStats.totalBrands}">0</div>
                <div class="fw-semibold" style="color:rgba(255,255,255,0.93);">H√£ng laptop</div>
            </div>
        </div>
    </div>
</div>

<!-- S·∫£n ph·∫©m n·ªïi b·∫≠t -->
<div class="container">
    <!-- Ti√™u ƒë·ªÅ cho section s·∫£n ph·∫©m n·ªïi b·∫≠t -->
    <h1 class="text-center mb-4 text-info fw-bold">S·∫£n ph·∫©m n·ªïi b·∫≠t</h1>
    <!-- Bootstrap chia l∆∞·ªõi: m·ªói row l√† 1 h√†ng, g-4 l√† kho·∫£ng c√°ch gi·ªØa c√°c c·ªôt -->
    <div class="row g-4">
        <!-- Duy·ªát qua danh s√°ch featuredLaptops, m·ªói laptop l√† 1 s·∫£n ph·∫©m -->
        <div th:each="laptop : ${featuredLaptops}" class="col-lg-4 col-md-6 col-12">
            <!-- Card Bootstrap th·ªÉ hi·ªán th√¥ng tin s·∫£n ph·∫©m, c√≥ class custom cho style -->
            <div class="card laptop-featured h-100 position-relative text-center p-2">
                <!-- N·∫øu s·∫£n ph·∫©m c√≥ promotions, hi·ªán tag gi·∫£m gi√° n·ªïi tr√™n ƒë·∫ßu (gi√° tr·ªã ho·∫∑c %) -->
                <span th:if="${laptop.promotions != null and !#lists.isEmpty(laptop.promotions)}"
                      class="discount-tag"
                      th:text="${laptop.promotions[0].discountAmount != null && laptop.promotions[0].discountAmount > 0
                        ? '-' + #numbers.formatDecimal(laptop.promotions[0].discountAmount, 0, 'POINT', 0, 'COMMA') + '‚Ç´'
                        : (laptop.promotions[0].discountPercent != null && laptop.promotions[0].discountPercent > 0
                           ? '-' + laptop.promotions[0].discountPercent + '%'
                           : '')}">
                </span>

                <!-- Badge ƒë·∫πp ·ªü g√≥c card: "Gi·∫£m ..." cho khuy·∫øn m√£i -->
                <span th:if="${laptop.promotions != null and !#lists.isEmpty(laptop.promotions)}"
                      class="badge discount position-absolute"
                      th:text="${laptop.promotions[0].discountAmount != null && laptop.promotions[0].discountAmount > 0
                        ? 'Gi·∫£m ' + #numbers.formatDecimal(laptop.promotions[0].discountAmount, 0, 'POINT', 0, 'COMMA') + '‚Ç´'
                        : (laptop.promotions[0].discountPercent != null && laptop.promotions[0].discountPercent > 0
                           ? 'Gi·∫£m ' + laptop.promotions[0].discountPercent + '%'
                           : '')}">
                </span>

                <!-- H√¨nh s·∫£n ph·∫©m, class custom cho CSS ·∫£nh to/canh gi·ªØa -->
                <img th:src="${laptop.image}" th:alt="${laptop.name}" class="card-img-top product mx-auto mt-4">

                <div class="card-body">
                    <!-- T√™n s·∫£n ph·∫©m, font ƒë·∫≠m/m√†u cho n·ªïi b·∫≠t -->
                    <h5 class="card-title fw-bold text-primary mb-3" th:text="${laptop.name}"></h5>

                    <!-- Hi·ªÉn th·ªã gi√° (gi√° sau gi·∫£m, gi√° g·ªëc g·∫°ch ngang n·∫øu c√≥ khuy·∫øn m√£i) -->
                    <div th:if="${laptop.promotions != null and !#lists.isEmpty(laptop.promotions)}" class="mb-2">
                        <span class="text-danger fs-5 fw-bold"
                              th:text="${
                                laptop.promotions[0].discountAmount != null && laptop.promotions[0].discountAmount > 0
                                  ? #numbers.formatDecimal(laptop.price - laptop.promotions[0].discountAmount, 0, 'POINT', 0, 'COMMA') + ' VNƒê'
                                  : (laptop.promotions[0].discountPercent != null && laptop.promotions[0].discountPercent > 0
                                    ? #numbers.formatDecimal(laptop.price * (100 - laptop.promotions[0].discountPercent) / 100, 0, 'POINT', 0, 'COMMA') + ' VNƒê'
                                    : #numbers.formatDecimal(laptop.price, 0, 'POINT', 0, 'COMMA') + ' VNƒê'
                                  )
                              }"></span>
                        <!-- Gi√° g·ªëc g·∫°ch ngang b√™n c·∫°nh ho·∫∑c ph√≠a d∆∞·ªõi gi√° sau gi·∫£m -->
                        <span class="text-decoration-line-through text-secondary ms-2"
                              th:text="${#numbers.formatDecimal(laptop.price, 0, 'POINT', 0, 'COMMA') + ' VNƒê'}"></span>
                    </div>

                    <!-- N·∫øu kh√¥ng c√≥ khuy·∫øn m√£i, ch·ªâ hi·ªÉn th·ªã gi√° ƒë√∫ng -->
                    <div th:if="${laptop.promotions == null or #lists.isEmpty(laptop.promotions)}" class="mb-2">
                        <span class="text-danger fs-5 fw-bold"
                              th:text="${#numbers.formatDecimal(laptop.price, 0, 'POINT', 0, 'COMMA') + ' VNƒê'}"></span>
                    </div>

                    <!-- N√∫t chuy·ªÉn t·ªõi trang chi ti·∫øt s·∫£n ph·∫©m -->
                    <a class="btn product-detail fw-bold px-4 mt-2" th:href="@{'/user/product/' + ${laptop.laptopId}}">Xem chi ti·∫øt</a>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- N√∫t chuy·ªÉn catalogue -->
<div class="container text-center mt-4">
    <a href="/user/products" class="btn btn-lg btn-warning fw-bold px-5 shadow">Xem t·∫•t c·∫£ s·∫£n ph·∫©m</a>
</div>

<!-- Gi·ªõi thi·ªáu shop d√†nh cho kh√°ch h√†ng -->
<div class="container my-5">
    <div class="bg-light rounded-4 shadow p-5 text-center">
        <h2 class="text-info fw-bold mb-3">V·ªÅ LaptopShop üíª‚ú®</h2>
        <hr class="w-25 mx-auto mb-4 border-info opacity-75">
        <p class="fs-5 text-secondary mb-0">
            <strong>Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi trang kh√°ch h√†ng c·ªßa LaptopShop! üéâ</strong>
            ƒê√¢y l√† n∆°i b·∫°n c√≥ th·ªÉ kh√°m ph√° <span class="text-dark">c√°c s·∫£n ph·∫©m laptop ch√≠nh h√£ng, ch·∫•t l∆∞·ª£ng cao üñ•Ô∏è</span>
            v·ªõi m·ª©c gi√° t·ªët nh·∫•t v√† ∆∞u ƒë√£i ƒë·∫∑c bi·ªát d√†nh ri√™ng cho kh√°ch h√†ng üéÅ.
            <br>Ch√∫ng t√¥i lu√¥n<span class="fw-semibold text-dark">t∆∞ v·∫•n t·∫≠n t√¢m üí¨</span>,
            <span class="fw-semibold text-dark">b·∫£o h√†nh uy t√≠n üõ°Ô∏è</span> v√† <span class="fw-semibold text-dark">giao h√†ng to√†n qu·ªëc üöö</span> ‚Äî
            gi√∫p b·∫°n d·ªÖ d√†ng s·ªü h·ªØu chi·∫øc laptop ph√π h·ª£p cho h·ªçc t·∫≠p, l√†m vi·ªác v√† gi·∫£i tr√≠ üéÆüéì.
            H√£y t·∫≠n h∆∞·ªüng tr·∫£i nghi·ªám mua s·∫Øm ti·ªán l·ª£i, nhanh ch√≥ng ngay t·∫°i trang kh√°ch h√†ng n√†y üõçÔ∏èüíñ!
        </p>
    </div>
</div>

<!-- Footer -->
<!--
    Ch√®n (thay th·∫ø) n·ªôi dung c·ªßa fragment 'footer' t·ª´ file fragments/footer.html v√†o v·ªã tr√≠ n√†y.
    - 'th:replace' l√† thu·ªôc t√≠nh c·ªßa Thymeleaf ƒë·ªÉ nh√∫ng m·ªôt fragment v√†o template.
    - fragments/footer: ƒë∆∞·ªùng d·∫´n t·ªõi file ch·ª©a fragment (resources/templates/fragments/footer.html).
    - ::footer: t√™n fragment ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a b·∫±ng th:fragment="footer" b√™n trong file.
    - C√°ch d√πng n√†y gi√∫p t√°i s·ª≠ d·ª•ng footer cho nhi·ªÅu trang, ch·ªâ c·∫ßn s·ª≠a ·ªü 1 n∆°i.
-->
<div th:replace="~{fragments/footer :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
